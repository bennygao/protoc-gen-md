apply plugin: 'java'

sourceCompatibility = 1.7
version = '1.0'

def libsPath = 'libs'
def targetArchive = "protoc-gen-md-${version}.jar"

repositories {
    jcenter()
    mavenCentral()
}

dependencies {
    compile fileTree(dir: libsPath, include: '*.jar')
}

jar {
    manifest {
        attributes 'Main-Class': 'cc.devfun.protobuf.plugin.ProtocGenMd'
    }

    archiveName = targetArchive

    // 把项目依赖的所有jar也打包进发布的jar包中。
    from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } }
}

build {
    copy {
        from('build/libs') {
            include('**/*.jar')
        }

        into('bin')
    }
}
